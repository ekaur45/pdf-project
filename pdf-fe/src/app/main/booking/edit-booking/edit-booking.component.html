<div class="row">
    <div class="col-lg-12">
        <div class="d-flex align-items-center user-member__title mb-30 mt-30">
            <h4 class="text-capitalize">add booking</h4>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="user-info-tab w-100 bg-white global-shadow radius-xl mb-50">
            <div class="userDatatable global-shadow border-light-0 bg-white radius-xl w-100 mb-30">

                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Agent name</label>
                                <ng-select2 class="form-control ih-medium p-0" [(ngModel)]="model.agentName"
                                    [data]="agents" [placeholder]="'Please select an agent'">
                                </ng-select2>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Staff name</label>
                                <ng-select2 class="form-control ih-medium p-0" [(ngModel)]="model.staffName"
                                    [data]="staffs" [placeholder]="'Please select a staff'">
                                </ng-select2>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Date</label>
                                <!-- <input type="text" class="form-control ih-medium flatpickr-minimum" name="Date" placeholder="Select date.." 
                                
                                [(ngModel)]="model.date"
                                /> -->
                                <app-date-picker name="date" [(date)]="model.date"></app-date-picker>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Order no.</label>
                                <input class="form-control ih-medium " type="text" readonly name="OrderNo"
                                    placeholder="Enter order number" [(ngModel)]="model.orderNo" />
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Passengers</label>
                                <input class="form-control ih-medium " type="text" name="Passengers"
                                    placeholder="Enter passengers" [(ngModel)]="model.passengers" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Nights</label>
                                <input class="form-control ih-medium " type="text" name="Nights"
                                    placeholder="Enter nights" [(ngModel)]="model.nights" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Departure</label>
                                <app-date-picker name="departure" [(date)]="model.departure"></app-date-picker>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Arrival</label>
                                <!-- <input class="form-control ih-medium  flatpickr-minimum" type="text" name="Arrival" placeholder="Enter arrival" 
                                [(ngModel)]="model.arrival"
                                /> -->
                                <app-date-picker name="Arrival" [(date)]="model.arrival"></app-date-picker>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Customer name</label>
                                <input class="form-control ih-medium " type="text" name="CustomerName"
                                    placeholder="Enter customer name" [(ngModel)]="model.customerName" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Guest type</label>
                                <input class="form-control ih-medium " type="text" name="CustomerName"
                                    placeholder="Enter guest type" [(ngModel)]="model.guestType" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Transportantion cost</label>
                                <input class="form-control ih-medium " type="number" name="transportationPrice"
                                    placeholder="Enter transportation cost" (ngModelChange)="onPriceChange()" [(ngModel)]="model.transportationPrice" />
                            </div>
                        </div>
                    </div>
                    <fieldset class="row">
                        <legend>
                            <h3>Destinations</h3>
                        </legend>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Destinations</label>
                                <!-- <select class="form-control ih-medium choices-single" type="text" name="destinationId" placeholder="Enter destination"
                                    [(ngModel)]="model.destination.destination"
                                    >
                                        <option *ngFor="let h of destinationData" [value]="h.display">{{ h.display }}</option>
                                    </select> -->

                                <ng-select2 class="form-control ih-medium p-0"
                                    [(ngModel)]="model.destination.destination" [data]="destinationData"
                                    [placeholder]="'Please select destination'">

                                </ng-select2>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">To</label>
                                <!-- <input class="form-control ih-medium  flatpickr-minimum" type="text" name="dateTo" placeholder="Enter date to" 
                                    [(ngModel)]="model.destination.dateTo"
                                    /> -->
                                <app-date-picker name="dateTo" [(date)]="model.destination.dateTo"></app-date-picker>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">From</label>
                                <!-- <input class="form-control ih-medium  flatpickr-minimum" type="text" name="dateFrom" placeholder="Enter date from" 
                                    [(ngModel)]="model.destination.dateFrom"
                                    /> -->
                                <app-date-picker name="dateFrom"
                                    [(date)]="model.destination.dateFrom"></app-date-picker>
                            </div>
                        </div>
                    </fieldset>
                    <!-- <div class="col-md-12">
                        </div> -->
                    <div class="row">
                        <div class="col-md-12">
                            <h3>Internal flight</h3>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">From</label>
                                <input class="form-control ih-medium " type="text" name="flightFrom"
                                    placeholder="Enter flight from" [(ngModel)]="model.flight.from" />

                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">To</label>
                                <input class="form-control ih-medium " type="text" name="flightTo"
                                    placeholder="Enter flight to" [(ngModel)]="model.flight.to" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Date to</label>
                                <!-- <input class="form-control ih-medium  flatpickr-minimum" type="text" name="flightDateFrom" placeholder="Enter flight date to" 
                                [(ngModel)]="model.flight.dateTo"
                                
                                /> -->
                                <app-date-picker name="flightDateTo" [(date)]="model.flight.dateTo"></app-date-picker>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Date from</label>
                                <!-- <input class="form-control ih-medium  flatpickr-minimum" type="text" name="flightDateTo" placeholder="Enter flight date from" 
                                [(ngModel)]="model.flight.dateFrom"
                                
                                /> -->
                                <app-date-picker name="flightDateFrom"
                                    [(date)]="model.flight.dateFrom"></app-date-picker>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Price</label>
                                <input class="form-control ih-medium " type="number" name="price"
                                    placeholder="Enter flight price" [(ngModel)]="model.flight.price" />

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <h3>Hotel</h3>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Booking no</label>
                                <input class="form-control ih-medium " type="text" name="customerName"
                                    placeholder="Enter booking no" [(ngModel)]="model.hotel.bookingNo" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Hotel</label>
                                <ng-select2 class="form-control ih-medium p-0" [(ngModel)]="model.hotel.hotel"
                                    [data]="hotels" [placeholder]="'Please select hotel'">

                                </ng-select2>
                                <!-- <select class="form-control ih-medium choices-single2"
                                
                                [(ngModel)]="model.hotel.hotel"
                                >
                                    <option *ngFor="let h of hotels" [value]="h.name">{{ h.name }}</option>
                                </select> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Nights</label>
                                <input class="form-control ih-medium " type="text" name="customerName"
                                    placeholder="Enter nights" [(ngModel)]="model.hotel.nights" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Room type</label>
                                <ng-select2 class="form-control ih-medium p-0" [(ngModel)]="model.hotel.roomType"
                                    [data]="roomTypes" [placeholder]="'Please select room type'"></ng-select2>
                                <!-- <select class="form-control ih-medium choices-single1"
                                [(ngModel)]="model.hotel.roomType"
                                >
                                    <option *ngFor="let h of roomTypes" [value]="h.display">{{ h.display }}</option>
                                </select> -->
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <button type="button" class="btn btn-info" (click)="onAddDestination()">
                                <i class="fa fa-plus"></i>
                                Add
                            </button>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <div class="userDatatable global-shadow border-light-0 bg-white radius-xl w-100 mb-30">
                                <div class="table-responsive">
                            <table class="table mb-0 table-borderless">
                                <tr class="userDatatable-header">
                                    <th>
                                        No
                                    </th>
                                    <th>
                                        Destination
                                    </th>
                                    <th>
                                        To
                                    </th>
                                    <th>
                                        From
                                    </th>
                                    <th>
                                        Action
                                    </th>
                                </tr>
                                <tr *ngFor="let r of destinationList;let ndx = index;">
                                    <td>
                                        {{ ndx + 1 }}
                                    </td>
                                    <td>
                                        {{ displayDestination(r.destination.destination) }}
                                    </td>
                                    <td>
                                        {{ r.destination.dateTo }}
                                    </td>
                                    <td>
                                        {{ r.destination.dateFrom }}
                                    </td>
                                    <th>
                                        <ul class="orderDatatable_actions mb-0 d-flex flex-wrap">
                                            <li>
                                                <a (click)="removeRow(ndx)" style="cursor: pointer;"  class="view">
                                                    <i class="uil uil-trash-alt"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </th>
                                </tr>
                            </table>
                        </div>
                    </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Currency</label>
                                <select class="form-control ih-medium" [(ngModel)]="model.currency">
                                    <option value="usd">USD</option>
                                    <option value="aed">AED</option>
                                </select>
                                <!-- <input class="form-control ih-medium " type="number"
                                    placeholder="Enter price" [(ngModel)]="model.price" (keyup)="onPriceChange()" /> -->
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Price</label>
                                <input class="form-control ih-medium " type="number" name="customerName"
                                    placeholder="Enter price" [(ngModel)]="model.price" (keyup)="onPriceChange()" [value]="priceCalculated" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Discount</label>
                                <input class="form-control ih-medium " type="number" name="customerName"
                                    placeholder="Enter discount" [(ngModel)]="model.discount"
                                    (keyup)="onPriceChange()" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Extra charges</label>
                                <input class="form-control ih-medium " type="number" name="customerName"
                                    placeholder="Enter extra charges" [(ngModel)]="model.extraCharges"
                                    (keyup)="onPriceChange()" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label class="form-label">Total</label>
                                <input class="form-control ih-medium " readonly type="number" name="customerName"
                                    placeholder="Enter total" [(ngModel)]="model.totalPrice" [value]="totalPriceCalculated"/>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-12">
                            <div class="card card-info">
                                <div class="card-header">
                                    <h4 class="mb-0">Select features</h4>
                                </div>
                                <div class="card-body d-flex flex-wrap">
                                    <div class="p-3 border border-1 mb-2 me-2" *ngFor="let f of features">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" [id]="'flexSwitchCheckDefault'+f.id" [(ngModel)]="f.checked">
                                            <label class="form-check-label" [for]="'flexSwitchCheckDefault'+f.id">{{f.display}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <div class="card card-info">
                                <div class="card-header">
                                    <h4 class="mb-0">Select terms and remarkss</h4>
                                </div>
                                <div class="card-body d-flex flex-wrap">
                                    <div class="p-3 border border-1 mb-2 me-2 w-100" *ngFor="let f of tocs">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" [id]="'flexSwitchCheckDefaultToc'+f.id" [(ngModel)]="f.checked">
                                            <label class="form-check-label" [for]="'flexSwitchCheckDefaultToc'+f.id">{{f.display}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="form-group">
                                <label class="form-label">Day</label>
                                <input type="text" [(ngModel)]="scheduleModel.day" class="form-control ih-medium">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Schedule</label>
                                <input type="text" [(ngModel)]="scheduleModel.schedule" class="form-control ih-medium">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label" style="color: transparent;">.</label>
                            <button class="btn btn-outline-primary btn-sm" (click)="addScheduleItem()">Add</button>
                        </div>
                        <div class="col-md-12">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>
                                            Day
                                        </th>
                                        <th>
                                            Schedule
                                        </th>
                                        <th>
                                            Action
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let sch of model.schedule;let ndx=index;">
                                        <td>{{sch.day}}</td>
                                        <td>{{sch.schedule}}</td>
                                        <td>
                                            <ul class="orderDatatable_actions mb-0 d-flex flex-wrap">
                                                <li>
                                                    <a (click)="removeScheduleItem(ndx)" style="cursor: pointer;" class="view">
                                                        <i class="uil uil-trash-alt"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- <div class="col-md-12 mb-3">
                            <button class="btn btn-outline-primary btn-block">Add schedule</button>
                        </div> -->
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <button class="btn btn-primary" *ngIf="!isEditing" (click)="onFormSubmit()">Update</button>
                            <button class="btn btn-primary" *ngIf="isEditing">Update...</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>